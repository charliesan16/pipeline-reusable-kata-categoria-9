name: ğŸš€ Automated Test Execution

on:
  workflow_call:
    inputs:
      repository:
        description: "ğŸ“‚ GitHub repository name where tests will be executed"
        required: true
        type: string
      java-version:
        description: "â˜• Java version to use"
        required: false
        default: "11"
        type: string
      command-install:
        description: "ğŸ“¦ Command to install project dependencies"
        required: true
        type: string
      command-execute:
        description: "ğŸ§ª Command to run automated tests"
        required: true
        type: string

jobs:
  run-tests:
    name: ğŸ—ï¸ Run Automated Tests
    runs-on: ubuntu-latest
    defaults:
      run:
        shell: bash
        working-directory: ${{ inputs.repository }}

    steps:
      - name: ğŸ“¥ Clone Repository
        uses: actions/checkout@v4
        with:
          repository: charliesan16/${{ inputs.repository }}
          persist-credentials: false
          path: ./${{ inputs.repository }}

      - name: â˜• Set Up Java ${{ inputs.java-version }}
        uses: actions/setup-java@v4
        with:
          java-version: ${{ inputs.java-version }}
          architecture: x64
          distribution: "adopt"

      - name: ğŸ“¦ Install Dependencies
        if: ${{ inputs.command-install != '' }}
        run: |
          echo "ğŸ“Œ Installing dependencies using: ${{ inputs.command-install }}"
          eval "${{ inputs.command-install }}"

      - name: ğŸ§ª Execute Automated Tests
        if: ${{ inputs.command-execute != '' }}
        run: |
          echo "ğŸš€ Running tests using: ${{ inputs.command-execute }}"
          eval "${{ inputs.command-execute }}"
